@model NuGist.Web.Controllers.GistViewModel
@{
    ViewData["Title"] = Model.Name;
}

<form class="well">
    <div class="form-group">
        <label>Name:</label>
        <input type="text" class="form-control" id="version" value="@Model.Name">
    </div>

    <div class="form-group">
        <label>Version:</label>
        <input type="text" class="form-control" id="version" value="@Model.Version">
    </div>

    @foreach (var file in Model.Files)
    {
        <div class="form-group">
            <label>File name:</label>
            <input type="text" class="form-control" id="version" value="@file.Filename">

            <div class="code-editor" style="width:100%;height:400px;border:1px solid grey" data-id="@file.Id" data-type="@file.Type" data-content="@file.Content"></div>
        </div>
    }

    <button id="btn-update" type="submit" class="btn btn-raised btn-primary">Update</button>
</form>

@section scripts
{
    <script src="~/lib/monaco-editor/loader.js"></script>
    <script>
        var editor = null;

        require.config({ paths: { 'vs': '/lib/monaco-editor' } });
        require(['vs/editor/editor.main'], function () {
            $(".code-editor").each(function (index, value) {
                editor = monaco.editor.create(value, {
                    value: [
                        $(value).attr('data-content')
                    ].join('\n'),
                    language: 'csharp'
                });
            })
        });
    </script>
}
